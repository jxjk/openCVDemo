# 产品需求规格说明书
## 微小零件中高精度视觉检测系统

---

## 文档信息

| 项目 | 内容 |
|------|------|
| 文档名称 | 微小零件中高精度视觉检测系统产品需求规格说明书 |
| 版本号 | V2.0 |
| 创建日期 | 2026-02-09 |
| 文档状态 | 初稿 |
| 修订日期 | 2026-02-09 |
| 修订内容 | 将精度等级从IT11级提升至IT8级 |

---

## 1. 引言

### 1.1 编写目的
本产品需求规格说明书旨在明确微小零件中高精度视觉检测系统的功能需求、性能需求、技术约束和验收标准，为开发团队提供清晰的实现指导，为测试团队提供验收依据，为产品经理提供决策参考。

### 1.2 项目背景
在制造业中，微小零件的尺寸检测是质量控制的关键环节。传统的人工检测方式效率低、易疲劳、主观性强，无法满足现代化生产的需求。本项目旨在利用OpenCV计算机视觉技术和亚像素级检测算法，开发一套自动化视觉检测系统，用于检测直径20mm以下、长度40mm以下、精度等级为IT8级的微小零件。IT8级为中等高精度标准，适用于精密机械、电子制造等领域。

### 1.3 应用范围
本系统适用于：
- 电子制造业微小元件检测
- 精密机械零部件质量检测
- 汽车零部件尺寸检测
- 医疗器械微小零件检测

---

## 2. 产品概述

### 2.1 产品定位
基于OpenCV和亚像素级检测算法的自动化微小零件尺寸检测系统，通过先进的图像处理技术实现中高精度、高效率的零件尺寸测量和质量判断。

### 2.2 核心价值
- **高效性**：自动化检测，检测速度≥60件/分钟
- **准确性**：检测精度达到IT8级标准（亚像素级检测精度1/20像素）
- **易用性**：操作简单，无需专业编程知识
- **可扩展性**：支持多种零件类型的检测模板
- **经济性**：相比IT5级方案，成本控制在合理范围内

### 2.3 目标用户
- 质量检测工程师
- 生产管理人员
- 工艺工程师
- 自动化设备操作员

---

## 3. 功能需求

### 3.1 核心功能

#### 3.1.1 图像采集功能
| 功能描述 | 详细说明 |
|----------|----------|
| 相机连接 | 支持USB工业相机、GigE相机接口 |
| 图像采集 | 支持实时预览、单帧采集、连续采集 |
| 图像保存 | 支持BMP、PNG、JPG格式图像保存 |
| 参数调整 | 支持曝光时间、增益、白平衡等参数调整 |

#### 3.1.2 图像预处理功能
| 功能描述 | 详细说明 |
|----------|----------|
| 图像去噪 | 支持高斯滤波、中值滤波、双边滤波 |
| 图像增强 | 支持直方图均衡化、对比度增强 |
| 边缘检测 | 支持Canny、Sobel、Laplacian边缘检测算法 |
| 阈值分割 | 支持Otsu、自适应阈值分割 |

#### 3.1.3 尺寸测量功能
| 功能描述 | 详细说明 |
|----------|----------|
| 直径测量 | 自动识别圆形零件，测量直径尺寸 |
| 长度测量 | 自动识别矩形/长条形零件，测量长度尺寸 |
| 宽度测量 | 自动识别矩形零件，测量宽度尺寸 |
| 像素标定 | 支持标定板自动标定，建立像素-毫米转换关系 |
| 多零件检测 | 支持单张图像内多个零件同时检测 |

#### 3.1.4 质量判断功能
| 功能描述 | 详细说明 |
|----------|----------|
| 尺寸公差判断 | 根据IT8级公差标准判断零件是否合格 |
| 缺陷检测 | 检测表面缺陷、边缘缺损、毛刺等 |
| 分类统计 | 合格品/不合格品数量统计 |
| 结果标记 | 在图像上标记测量结果和判断结果 |

#### 3.1.5 数据管理功能
| 功能描述 | 详细说明 |
|----------|----------|
| 数据记录 | 记录检测时间、零件编号、测量结果、判断结果 |
| 数据导出 | 支持Excel、CSV格式数据导出 |
| 图像归档 | 支持检测图像自动归档存储 |
| 历史查询 | 支持按时间、零件类型、检测结果查询历史数据 |

#### 3.1.6 系统配置功能
| 功能描述 | 详细说明 |
|----------|----------|
| 零件模板配置 | 支持创建、编辑、删除零件检测模板 |
| 公差配置 | 支持自定义公差范围（IT11级标准） |
| 系统参数配置 | 支持相机参数、检测参数、保存路径等配置 |
| 用户权限管理 | 支持操作员、管理员不同权限设置 |

### 3.2 辅助功能

#### 3.2.1 报警功能
- 不合格品报警：声光报警提示
- 异常情况报警：相机断连、图像质量异常等

#### 3.2.2 日志功能
- 操作日志：记录用户操作行为
- 系统日志：记录系统运行状态和异常信息

#### 3.2.3 帮助功能
- 操作手册：在线帮助文档
- 视频教程：操作演示视频

---

## 4. 非功能需求

### 4.1 性能需求

| 性能指标 | 要求 |
|----------|------|
| 检测速度 | ≥60件/分钟 |
| 检测精度 | 符合IT8级公差标准 |
| 亚像素精度 | ≥1/20像素 |
| 图像处理延迟 | <300ms/张（含亚像素处理） |
| 系统响应时间 | <1s |
| 启动时间 | <10s |

### 4.2 可靠性需求

| 可靠性指标 | 要求 |
|------------|------|
| 系统可用性 | ≥99.5% |
| 平均无故障时间（MTBF） | ≥2000小时 |
| 平均故障修复时间（MTTR） | <4小时 |

### 4.3 兼容性需求

| 兼容性类型 | 要求 |
|------------|------|
| 操作系统 | Windows 10/11 64位 |
| 相机接口 | USB 3.0、GigE Vision |
| 图像格式 | BMP、PNG、JPG、TIFF |
| 数据导出 | Excel (.xlsx)、CSV (.csv) |

### 4.4 安全性需求

- 数据备份：支持检测数据自动备份
- 操作审计：记录所有关键操作
- 权限控制：不同用户角色具有不同操作权限

### 4.5 易用性需求

- 界面友好：中文界面，操作直观
- 学习成本低：新用户30分钟内可掌握基本操作
- 帮助完善：提供在线帮助和操作手册

---

## 5. 技术约束

### 5.1 检测范围约束

| 参数 | 范围 |
|------|------|
| 零件直径 | 1mm - 20mm |
| 零件长度 | 2mm - 40mm |
| 检测精度 | IT8级 |
| 亚像素精度 | ≥1/20像素 |

### 5.2 精度要求（IT8级公差标准）

| 公称尺寸（mm） | IT8公差值（mm） | IT11公差值（mm） | 精度提升 |
|----------------|------------------|------------------|----------|
| >1 - 3 | 0.014 | 0.060 | 4.3倍 |
| >3 - 6 | 0.018 | 0.075 | 4.2倍 |
| >6 - 10 | 0.022 | 0.090 | 4.1倍 |
| >10 - 18 | 0.027 | 0.110 | 4.1倍 |
| >18 - 30 | 0.033 | 0.130 | 3.9倍 |
| >30 - 40 | 0.039 | 0.160 | 4.1倍 |

**说明：** IT8级精度比IT11级提升约4倍，适用于中等高精度检测场景。

### 5.3 技术栈约束

| 技术类别 | 选型 |
|----------|------|
| 开发语言 | Python 3.8+ |
| 图像处理库 | OpenCV 4.5+、SciPy（用于Zernike矩） |
| GUI框架 | PyQt5 / PySide6 |
| 数据处理 | NumPy、Pandas |
| 图像采集 | OpenCV VideoCapture / 相机SDK |
| 亚像素检测 | OpenCV cornerSubPix、自定义Zernike矩算法 |

### 5.4 硬件约束

| 硬件类型 | 最低配置 | 推荐配置 |
|----------|----------|----------|
| CPU | Intel Core i5 或同等性能 | Intel Core i7 或更高 |
| 内存 | 8GB | 16GB |
| 存储 | 100GB可用空间 | 200GB可用空间（SSD） |
| 相机 | 1000万像素以上工业相机 | 2000万像素工业相机 |
| 镜头 | 定焦镜头，放大倍数0.5X - 5X | 远心镜头，放大倍数1X - 5X |
| 光源 | 环形LED光源 | 高亮度环形LED光源 |
| 标定板 | IT7级标定板 | IT5级标定板 |

**说明：** IT8级精度对硬件要求比IT11级提高约2-3倍，但远低于IT5级的要求。

---

## 6. 系统架构

### 6.1 系统层次架构

```
┌─────────────────────────────────────┐
│         用户界面层 (GUI)              │
│  - 图像显示  - 参数设置  - 结果展示    │
└──────────────┬──────────────────────┘
               │
┌──────────────▼──────────────────────┐
│         业务逻辑层                   │
│  - 图像采集  - 图像处理  - 尺寸测量    │
│  - 质量判断  - 数据管理               │
└──────────────┬──────────────────────┘
               │
┌──────────────▼──────────────────────┐
│         数据访问层                   │
│  - 图像存储  - 数据库  - 配置文件      │
└──────────────┬──────────────────────┘
               │
┌──────────────▼──────────────────────┐
│         硬件接口层                   │
│  - 相机驱动  - I/O控制                │
└─────────────────────────────────────┘
```

### 6.2 数据流程

```
相机采集 → 图像预处理 → 边缘检测 → 轮廓提取 → 尺寸计算 → 公差判断 → 结果输出
    ↓         ↓          ↓          ↓          ↓          ↓          ↓
  实时预览   图像增强    边缘图像    零件轮廓   像素尺寸   合格/不合格   显示/保存
```

---

## 7. 用户界面需求

### 7.1 主界面布局

```
┌─────────────────────────────────────────────────────────────┐
│  菜单栏：文件 | 编辑 | 视图 | 工具 | 帮助                      │
├──────────┬──────────────────────────────────────────────────┤
│          │                                                  │
│  图像    │              图像显示区域                         │
│  列表    │           (显示当前采集的图像)                   │
│          │                                                  │
├──────────┴──────────────────────────────────────────────────┤
│  控制面板                                                   │
│  [开始检测] [停止] [单张采集] [参数设置] [数据导出]         │
├─────────────────────────────────────────────────────────────┤
│  结果显示                                                   │
│  零件编号: XXX001  |  直径: 10.05mm  |  长度: 20.12mm        │
│  检测结果: ✓合格   |  公差: ±0.11mm  |  检测时间: 2026-02-09 │
└─────────────────────────────────────────────────────────────┘
```

### 7.2 界面语言
- 支持中文界面
- 支持英文界面（可选）

---

## 8. 数据需求

### 8.1 输入数据

| 数据类型 | 格式 | 说明 |
|----------|------|------|
| 图像数据 | BMP/PNG/JPG | 相机采集的零件图像 |
| 零件模板 | XML/JSON | 零件检测参数配置 |
| 标定参数 | XML/JSON | 相机标定数据 |
| 公差标准 | XML/JSON | IT11级公差数据 |

### 8.2 输出数据

| 数据类型 | 格式 | 说明 |
|----------|------|------|
| 检测结果 | Excel/CSV | 零件测量数据和判断结果 |
| 检测图像 | BMP/PNG | 标注了测量结果的图像 |
| 统计报表 | Excel/CSV | 合格率、不合格率统计 |
| 操作日志 | TXT | 系统运行日志 |

### 8.3 数据存储

| 数据类型 | 存储方式 | 保留周期 |
|----------|----------|----------|
| 检测结果 | 数据库/文件 | 永久保存 |
| 检测图像 | 文件系统 | 30天（可配置） |
| 系统日志 | 文件系统 | 90天（可配置） |
| 配置数据 | 文件系统 | 永久保存 |

---

## 9. 测试需求

### 9.1 功能测试

| 测试项 | 测试内容 | 预期结果 |
|--------|----------|----------|
| 图像采集测试 | 连接相机，采集图像 | 成功采集清晰图像 |
| 尺寸测量测试 | 测量标准件 | 测量误差<±0.01mm |
| 公差判断测试 | 输入边界值测试 | 正确判断合格/不合格 |
| 数据导出测试 | 导出检测数据 | 数据完整，格式正确 |

### 9.2 性能测试

| 测试项 | 测试内容 | 预期结果 |
|--------|----------|----------|
| 检测速度测试 | 连续检测100件 | 平均检测时间<1s/件 |
| 并发测试 | 同时处理多张图像 | 系统稳定运行 |
| 长时间运行测试 | 连续运行24小时 | 无崩溃，内存稳定 |

### 9.3 精度测试

| 测试项 | 测试方法 | 验收标准 |
|--------|----------|----------|
| 直径测量精度 | 使用标准环规测量 | 误差<IT11级公差的20% |
| 长度测量精度 | 使用标准块规测量 | 误差<IT11级公差的20% |
| 重复性测试 | 同一零件重复测量10次 | 标准差<IT11级公差的10% |

---

## 10. 验收标准

### 10.1 功能验收标准

- ✓ 所有核心功能正常运行
- ✓ 系统无严重Bug
- ✓ 操作手册完整准确

### 10.2 性能验收标准

- ✓ 检测速度≥60件/分钟
- ✓ 检测精度符合IT8级标准
- ✓ 亚像素精度≥1/20像素
- ✓ 系统响应时间<1s

### 10.3 精度验收标准

| 检测项目 | 验收标准 | IT11标准 | 精度提升 |
|----------|----------|----------|----------|
| 直径测量（10mm） | 测量误差≤±0.005mm | ±0.022mm | 4.4倍 |
| 长度测量（20mm） | 测量误差≤±0.007mm | ±0.032mm | 4.6倍 |
| 重复性（10次） | 标准差≤0.004mm | 0.016mm | 4倍 |
| 亚像素精度 | ≥1/20像素 | - | 新增 |

**说明：** IT8级验收标准比IT11级严格约4倍。

### 10.4 文档验收标准

- ✓ 产品需求规格说明书
- ✓ 用户操作手册
- ✓ 技术实现文档
- ✓ 测试报告

---

## 11. 风险分析

### 11.1 技术风险

| 风险项 | 风险等级 | 应对措施 |
|--------|----------|----------|
| 检测精度达不到IT11级 | 高 | 优化图像处理算法，使用高分辨率相机 |
| 系统稳定性不足 | 中 | 加强异常处理，进行充分测试 |
| 兼容性问题 | 低 | 提前进行兼容性测试 |

### 11.2 项目风险

| 风险项 | 风险等级 | 应对措施 |
|--------|----------|----------|
| 开发周期延误 | 中 | 合理规划开发计划，设置里程碑 |
| 需求变更 | 中 | 建立需求变更管理流程 |

---

## 12. 附录

### 12.1 IT8级公差标准表

| 公称尺寸段（mm） | IT8公差值（mm） | IT7公差值（mm） | IT9公差值（mm） | 说明 |
|------------------|------------------|------------------|------------------|------|
| >1 - 3 | 0.014 | 0.010 | 0.025 | 直径/长度公差 |
| >3 - 6 | 0.018 | 0.012 | 0.030 | 直径/长度公差 |
| >6 - 10 | 0.022 | 0.015 | 0.036 | 直径/长度公差 |
| >10 - 18 | 0.027 | 0.018 | 0.043 | 直径/长度公差 |
| >18 - 30 | 0.033 | 0.021 | 0.052 | 直径/长度公差 |
| >30 - 40 | 0.039 | 0.025 | 0.062 | 直径/长度公差 |

**精度等级对比：**
- IT7级：高精度（精密轴承、齿轮）
- IT8级：中等高精度（精密机械零件）← 本项目目标
- IT9级：中等精度（一般机械零件）
- IT11级：低精度（粗加工零件）

### 12.2 术语表

| 术语 | 定义 |
|------|------|
| IT8级 | 国际标准公差等级，中等高精度要求，适用于精密机械零件 |
| 亚像素检测 | 在像素级别以下精度进行边缘或特征定位的技术，可突破物理像素分辨率限制 |
| 边缘检测 | 图像处理中检测物体边缘的技术 |
| 轮廓提取 | 从图像中提取物体轮廓的过程 |
| 像素标定 | 建立图像像素与实际尺寸之间的转换关系 |
| Zernike矩 | 用于亚像素边缘定位的高精度算法，可达1/50像素精度 |
| cornerSubPix | OpenCV提供的亚像素角点精细化函数 |

### 12.3 参考文档

- GB/T 1800.1-2009 产品几何技术规范（GPS）极限与配合
- ISO 2768-1:1989 一般公差 未注公差的线性和角度尺寸的公差
- OpenCV官方文档 https://docs.opencv.org/

---

**文档结束**